import{b as m,A as O,B as P,p as j,r as G}from"./elementPlus-DUIuSOAC.js";import{y as H,r as p,l as D,c as K,h as X,z as B,R as t,J as s,al as a,B as l,O as y,u as b,P as V,L as Y,Q as Z,a6 as ee,A as x,I as te}from"./vendor-Dt6xM8n7.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";const le={class:"system-settings"},oe={class:"card-header"},ae={class:"card-header"},ne={class:"card-header"},ie={class:"info-card"},re={class:"info-icon system"},de={class:"info-card"},ue={class:"info-icon database"},me={class:"info-card"},ce={class:"info-icon runtime"},_e={class:"info-content"},pe={class:"info-value"},fe={class:"info-card"},ve={class:"info-icon status"},ge={class:"card-header"},ye={class:"log-content"},be={class:"log-title"},Ve={class:"log-desc"},xe={class:"log-user"},he={key:0,class:"empty-logs"},we=H({__name:"SystemSettings",setup(Se){const h=p(!1),w=p(!1),S=p(),k=p(),R=p(new Date),i=D({site_name:"在线轮椅租赁系统",contact_phone:"400-888-8888",contact_email:"service@wheelchair-rental.com",service_hours:"9:00-21:00",maintenance_mode:!1}),c=D({delivery_fee:0,max_rental_days:30,deposit_rate:100}),C=p([{time:"2024-01-15 14:30",type:"primary",title:"系统设置更新",description:"更新了客服电话和服务时间",user:"admin"},{time:"2024-01-15 13:45",type:"success",title:"轮椅信息更新",description:"更新了标准轮椅 SW-001 的库存信息",user:"admin"},{time:"2024-01-15 12:20",type:"warning",title:"订单状态变更",description:"订单 #WR20240115001 状态更新为已配送",user:"admin"},{time:"2024-01-15 11:15",type:"info",title:"用户数据导出",description:"导出了用户订单数据报表",user:"admin"}]),L={site_name:[{required:!0,message:"请输入网站名称",trigger:"blur"},{min:2,max:50,message:"网站名称长度在 2 到 50 个字符",trigger:"blur"}],contact_phone:[{required:!0,message:"请输入客服电话",trigger:"blur"},{pattern:/^[0-9-+()\s]+$/,message:"请输入正确的电话号码",trigger:"blur"}],contact_email:[{required:!0,message:"请输入客服邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],service_hours:[{required:!0,message:"请输入服务时间",trigger:"blur"}]},M={delivery_fee:[{required:!0,message:"请输入配送费用",trigger:"blur"},{type:"number",min:0,message:"配送费用不能小于 0",trigger:"blur"}],max_rental_days:[{required:!0,message:"请输入最大租赁天数",trigger:"blur"},{type:"number",min:1,max:365,message:"租赁天数在 1 到 365 天之间",trigger:"blur"}],deposit_rate:[{required:!0,message:"请输入定金比例",trigger:"blur"},{type:"number",min:0,max:100,message:"定金比例在 0 到 100 之间",trigger:"blur"}]},$=K(()=>{const e=new Date().getTime()-R.value.getTime(),_=Math.floor(e/(1e3*60*60*24)),d=Math.floor(e%(1e3*60*60*24)/(1e3*60*60)),n=Math.floor(e%(1e3*60*60)/(1e3*60));return _>0?`${_}天${d}小时${n}分钟`:d>0?`${d}小时${n}分钟`:`${n}分钟`}),z=async()=>{try{m.success("设置加载完成")}catch(r){console.error("获取系统设置失败:",r),m.error("获取设置失败，请稍后重试")}},F=async()=>{if(S.value)try{if(!await S.value.validate())return;h.value=!0,m.success("基本设置保存成功")}catch(r){console.error("保存基本设置失败:",r),m.error("保存失败，请稍后重试")}finally{h.value=!1}},N=async()=>{if(k.value)try{if(!await k.value.validate())return;w.value=!0,m.success("业务设置保存成功")}catch(r){console.error("保存业务设置失败:",r),m.error("保存失败，请稍后重试")}finally{w.value=!1}},T=()=>{R.value=new Date(Date.now()-Math.random()*1e3*60*60*24*7),m.success("系统信息已刷新")},A=()=>{m.info("查看全部日志功能开发中...")};return X(()=>{z(),R.value=new Date(Date.now()-Math.random()*1e3*60*60*24*7)}),(r,e)=>{const _=a("el-button"),d=a("el-input"),n=a("el-form-item"),I=a("el-switch"),q=a("el-form"),f=a("el-card"),u=a("el-col"),U=a("el-input-number"),v=a("el-row"),g=a("el-icon"),E=a("el-timeline-item"),Q=a("el-timeline"),W=a("el-empty");return x(),B("div",le,[t(v,{gutter:20},{default:s(()=>[t(u,{xs:24,lg:12},{default:s(()=>[t(f,null,{header:s(()=>[l("div",oe,[e[9]||(e[9]=l("span",null,"基本设置",-1)),t(_,{type:"primary",loading:h.value,onClick:F},{default:s(()=>[...e[8]||(e[8]=[y(" 保存 ",-1)])]),_:1},8,["loading"])])]),default:s(()=>[t(q,{ref_key:"basicFormRef",ref:S,model:i,rules:L,"label-width":"120px"},{default:s(()=>[t(n,{label:"网站名称",prop:"site_name"},{default:s(()=>[t(d,{modelValue:i.site_name,"onUpdate:modelValue":e[0]||(e[0]=o=>i.site_name=o),placeholder:"请输入网站名称"},null,8,["modelValue"])]),_:1}),t(n,{label:"客服电话",prop:"contact_phone"},{default:s(()=>[t(d,{modelValue:i.contact_phone,"onUpdate:modelValue":e[1]||(e[1]=o=>i.contact_phone=o),placeholder:"请输入客服电话"},null,8,["modelValue"])]),_:1}),t(n,{label:"客服邮箱",prop:"contact_email"},{default:s(()=>[t(d,{modelValue:i.contact_email,"onUpdate:modelValue":e[2]||(e[2]=o=>i.contact_email=o),placeholder:"请输入客服邮箱"},null,8,["modelValue"])]),_:1}),t(n,{label:"服务时间",prop:"service_hours"},{default:s(()=>[t(d,{modelValue:i.service_hours,"onUpdate:modelValue":e[3]||(e[3]=o=>i.service_hours=o),placeholder:"例如：9:00-21:00"},null,8,["modelValue"])]),_:1}),t(n,{label:"维护模式"},{default:s(()=>[t(I,{modelValue:i.maintenance_mode,"onUpdate:modelValue":e[4]||(e[4]=o=>i.maintenance_mode=o),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"]),e[10]||(e[10]=l("div",{class:"form-tip"}," 开启后，客户端将显示维护页面 ",-1))]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),t(u,{xs:24,lg:12},{default:s(()=>[t(f,null,{header:s(()=>[l("div",ae,[e[12]||(e[12]=l("span",null,"业务设置",-1)),t(_,{type:"primary",loading:w.value,onClick:N},{default:s(()=>[...e[11]||(e[11]=[y(" 保存 ",-1)])]),_:1},8,["loading"])])]),default:s(()=>[t(q,{ref_key:"businessFormRef",ref:k,model:c,rules:M,"label-width":"120px"},{default:s(()=>[t(n,{label:"配送费用",prop:"delivery_fee"},{default:s(()=>[t(U,{modelValue:c.delivery_fee,"onUpdate:modelValue":e[5]||(e[5]=o=>c.delivery_fee=o),min:0,precision:2,placeholder:"请输入配送费用",style:{width:"100%"}},null,8,["modelValue"]),e[13]||(e[13]=l("div",{class:"form-tip"}," 单位：元，0表示免费配送 ",-1))]),_:1}),t(n,{label:"最大租赁天数",prop:"max_rental_days"},{default:s(()=>[t(U,{modelValue:c.max_rental_days,"onUpdate:modelValue":e[6]||(e[6]=o=>c.max_rental_days=o),min:1,max:365,placeholder:"请输入最大租赁天数",style:{width:"100%"}},null,8,["modelValue"]),e[14]||(e[14]=l("div",{class:"form-tip"}," 单位：天，限制单次租赁的最大天数 ",-1))]),_:1}),t(n,{label:"定金比例",prop:"deposit_rate"},{default:s(()=>[t(U,{modelValue:c.deposit_rate,"onUpdate:modelValue":e[7]||(e[7]=o=>c.deposit_rate=o),min:0,max:100,precision:2,placeholder:"请输入定金比例",style:{width:"100%"}},null,8,["modelValue"]),e[15]||(e[15]=l("div",{class:"form-tip"}," 单位：%，定金 = 租金 × 定金比例 ",-1))]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1}),t(v,{gutter:20,style:{"margin-top":"20px"}},{default:s(()=>[t(u,{span:24},{default:s(()=>[t(f,null,{header:s(()=>[l("div",ne,[e[17]||(e[17]=l("span",null,"系统信息",-1)),t(_,{type:"primary",onClick:T},{default:s(()=>[t(g,null,{default:s(()=>[t(b(G))]),_:1}),e[16]||(e[16]=y(" 刷新 ",-1))]),_:1})])]),default:s(()=>[t(v,{gutter:20},{default:s(()=>[t(u,{xs:24,sm:12,lg:6},{default:s(()=>[l("div",ie,[l("div",re,[t(g,{size:"32"},{default:s(()=>[t(b(O))]),_:1})]),e[18]||(e[18]=l("div",{class:"info-content"},[l("div",{class:"info-title"},"系统版本"),l("div",{class:"info-value"},"v1.0.0")],-1))])]),_:1}),t(u,{xs:24,sm:12,lg:6},{default:s(()=>[l("div",de,[l("div",ue,[t(g,{size:"32"},{default:s(()=>[t(b(P))]),_:1})]),e[19]||(e[19]=l("div",{class:"info-content"},[l("div",{class:"info-title"},"数据库"),l("div",{class:"info-value"},"SQLite")],-1))])]),_:1}),t(u,{xs:24,sm:12,lg:6},{default:s(()=>[l("div",me,[l("div",ce,[l("div",_e,[e[20]||(e[20]=l("div",{class:"info-title"},"运行时间",-1)),l("div",pe,V($.value),1)])])])]),_:1}),t(u,{xs:24,sm:12,lg:6},{default:s(()=>[l("div",fe,[l("div",ve,[t(g,{size:"32"},{default:s(()=>[t(b(j))]),_:1})]),e[21]||(e[21]=l("div",{class:"info-content"},[l("div",{class:"info-title"},"系统状态"),l("div",{class:"info-value status-normal"},"正常")],-1))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(v,{gutter:20,style:{"margin-top":"20px"}},{default:s(()=>[t(u,{span:24},{default:s(()=>[t(f,null,{header:s(()=>[l("div",ge,[e[23]||(e[23]=l("span",null,"最近操作日志",-1)),t(_,{type:"text",onClick:A},{default:s(()=>[...e[22]||(e[22]=[y(" 查看全部 ",-1)])]),_:1})])]),default:s(()=>[t(Q,null,{default:s(()=>[(x(!0),B(Z,null,ee(C.value,(o,J)=>(x(),te(E,{key:J,timestamp:o.time,type:o.type},{default:s(()=>[l("div",ye,[l("div",be,V(o.title),1),l("div",Ve,V(o.description),1),l("div",xe,"操作人："+V(o.user),1)])]),_:2},1032,["timestamp","type"]))),128))]),_:1}),C.value.length===0?(x(),B("div",he,[t(W,{description:"暂无操作记录","image-size":80})])):Y("",!0)]),_:1})]),_:1})]),_:1})])}}}),Be=se(we,[["__scopeId","data-v-cf856de5"]]);export{Be as default};
